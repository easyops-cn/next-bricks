<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form.general-form id="form">
      <form.dynamic-form-item
        name="dynamic"
        label="动态表单"
        required="true"
        id="dynamic-form-item"
      ></form.dynamic-form-item>
      <basic.general-button id="submit-btn">提交表单</basic.general-button>
      <basic.general-button id="set-value-btn">设置默认值</basic.general-button>
    </form.general-form>
  </body>
  <script>
    const form = document.getElementById("form");
    const dynamicFormItem = document.getElementById("dynamic-form-item");
    const submitBtn = document.getElementById("submit-btn");
    const setValueBtn = document.getElementById("set-value-btn");

    dynamicFormItem.useBrick = [
      {
        brick: "form.general-input",
        properties: {
          name: "input",
          required: true,
        },
      },
      {
        brick: "form.general-select",
        properties: {
          name: "select",
          required: true,
          options: ["abc", "efg", "hij"],
        },
      },
    ];

    form.addEventListener("validate.success", (e) => {
      console.log("success", e);
    });
    form.addEventListener("validate.error", (e) => {
      console.log("error", e);
    });
    dynamicFormItem.addEventListener("change", (e) => {
      console.log("dynamic change", e);
    });

    submitBtn.addEventListener("click", () => {
      form.validate();
    });

    setValueBtn.addEventListener("click", () => {
      form.setInitValue({
        dynamic: [
          {
            input: "hello",
            select: "abc",
          },
          {
            input: "world",
            select: "efg",
          },
        ],
      });
    });
  </script>
</html>
